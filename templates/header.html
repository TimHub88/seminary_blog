<!-- Fichier: seminary/presentation/templates/header.html -->
<!-- Header autonome de Seminary avec styles inline -->

<style>
    /* Variables CSS nécessaires pour le header */
    :root {
        --primary-color: #7E22CE;
        --primary-color-light: #A94BE0;
        --primary-color-dark: #7915A9;
        --primary-transparent: rgba(126, 34, 206, 0.1);
        --white: #FFFFFF;
        --black: #222222;
        --gray-100: #F3F4F6;
        --gray-200: #E5E7EB;
        --transition-fast: 0.2s ease;
        --transition-normal: 0.3s ease;
    }

    /* Styles navbar Bootstrap */
    .navbar {
        background-color: var(--primary-color);
        padding: 0.75rem 1rem;
    }
    
    .navbar-brand {
        color: var(--white);
        font-weight: 700;
        font-size: 1.25rem;
    }
    
    .navbar-brand:hover {
        color: var(--white);
    }
    
    .navbar-text {
        color: rgba(255, 255, 255, 0.8);
    }
    
    .nav-link {
        color: rgba(255, 255, 255, 0.8) !important;
    }
    
    .nav-link:hover {
        color: var(--white) !important;
    }

    /* Styles du header moderne */
    .new-header {
        background: linear-gradient(to bottom, #8C1DCB, #7A1AAD);
        position: sticky;
        top: 0;
        z-index: 1000;
        width: 100%;
        height: 70px;
        display: flex;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        padding: 0 30px;
    }

    .header-logo {
        display: flex;
        align-items: center;
        text-decoration: none;
    }

    .header-logo img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
    }

    .header-logo-text {
        font-size: 24px;
        font-weight: 600;
        color: white;
    }

    .header-right {
        display: flex;
        align-items: center;
    }

    .header-nav {
        display: flex;
        gap: 24px;
    }

    .header-nav-link {
        color: white;
        text-decoration: none;
        font-size: 16px;
        font-weight: 500;
        transition: opacity 0.2s;
    }

    .header-nav-link:hover {
        opacity: 0.8;
    }

    .header-actions {
        display: flex;
        gap: 16px;
        margin-left: 30px;
    }

    .header-button {
        text-decoration: none;
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 500;
        transition: all 0.2s;
    }

    .header-button-primary {
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    #userDropdown.header-button-primary {
        color: var(--white);
    }

    .header-button-primary:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .header-button-signup {
        background-color: white;
        color: #7E22CE;
    }

    .header-button-signup:hover {
        background-color: #f0f0f0;
    }

    /* Styles pour le badge de localisation Vosges */
    .vosges-location {
        display: inline-flex !important;
        align-items: center;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 6px 12px;
        margin-left: 15px;
        font-size: 0.85rem;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
    }

    .vosges-location:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-1px);
    }

    .vosges-location .location-icon {
        width: 16px;
        height: 16px;
        margin-right: 6px;
        opacity: 0.9;
        animation: locationPulse 2s infinite;
    }

    .vosges-location .location-text {
        font-weight: 600;
        letter-spacing: 0.3px;
    }

    @keyframes locationPulse {
        0%, 100% {
            opacity: 0.9;
            transform: scale(1);
        }
        50% {
            opacity: 1;
            transform: scale(1.1);
        }
    }

    /* Masquer l'ancienne carte des Vosges */
    .vosges-map {
        display: none !important;
    }

    /* Bootstrap Navbar Collapse Styling (lg breakpoint) */
    @media (max-width: 991.98px) {
        .vosges-map {
            height: 45px !important;
            max-height: 45px !important;
        }

        .navbar-collapse {
            background-color: var(--white);
            padding: 1rem;
            margin-top: 0.5rem;
            border-radius: 0.375rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--gray-200);
        }

        .navbar-collapse .navbar-nav .nav-link {
            color: var(--black) !important;
            padding: 0.5rem 0;
        }
        .navbar-collapse .navbar-nav .nav-link:hover {
            color: var(--primary-color) !important;
        }

        .navbar-collapse .navbar-nav {
            width: 100%;
        }

        .navbar-collapse .d-flex {
            width: 100%;
            flex-direction: column;
            margin-top: 1rem;
        }

        .navbar-collapse .dropdown {
             width: 100%;
             margin-bottom: 0.5rem;
        }
        
        .navbar-collapse .dropdown .btn {
            color: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
            background-color: transparent !important;
            width: 100%;
            text-align: center;
        }
        .navbar-collapse .dropdown .btn:hover {
            background-color: var(--primary-transparent) !important;
        }

        .navbar-collapse .auth-btn {
            width: 100%;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        .navbar-collapse .auth-btn:last-child {
            margin-bottom: 0;
        }
        
        .navbar-collapse .auth-btn.login-btn {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
        }
        .navbar-collapse .auth-btn.login-btn:hover {
            background-color: var(--primary-color-dark);
        }
        
        .navbar-collapse .auth-btn.register-btn {
             background-color: transparent;
             color: var(--primary-color);
             border: 1px solid var(--primary-color);
        }
        .navbar-collapse .auth-btn.register-btn:hover {
             background-color: var(--primary-transparent);
        }
    }

    /* Responsive pour le badge Vosges */
    @media (max-width: 768px) {
        .vosges-location {
            margin-left: 8px;
            padding: 3px 6px;
            font-size: 0.7rem;
            border-radius: 12px;
        }

        .vosges-location .location-icon {
            width: 12px;
            height: 12px;
            margin-right: 3px;
        }

        .vosges-location .location-badge {
            display: none;
        }
    }

    @media (max-width: 480px) {
        .vosges-location {
            margin-left: 6px;
            padding: 2px 5px;
            font-size: 0.65rem;
            border-radius: 10px;
        }

        .vosges-location .location-icon {
            width: 10px;
            height: 10px;
            margin-right: 2px;
        }
    }
</style>

<header>
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Navbar Seminary -->
    <nav class="new-header navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="header-logo navbar-brand" href="{{ url_for('home.index') }}">
                <img src="https://d1muf25xaso8hp.cloudfront.net/https%3A%2F%2F11d96a0e7e946a6d02eea1b59ed8995d.cdn.bubble.io%2Ff1738937103143x452387340290872700%2FSans%2520titre-1%2520%25281%2529.png?w=64&h=64&auto=compress&dpr=1&fit=max" alt="Seminary">
                <span class="header-logo-text">Seminary</span>
                
                <!-- Indicateur de localisation Vosges -->
                <div class="vosges-location" title="Vous êtes sur Seminary Vosges">
                    <svg class="location-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                    <span class="location-text">Vosges</span>
                    <svg class="location-badge" viewBox="0 0 8 8" fill="currentColor" style="width: 8px; height: 8px; margin-left: 4px; opacity: 0.7;">
                        <circle cx="4" cy="4" r="4"/>
                    </svg>
                </div>
            </a>

            <!-- Hamburger Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavContent" aria-controls="navbarNavContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Collapsible Content -->
            <div class="collapse navbar-collapse justify-content-end lg:visible lg:flex" id="navbarNavContent">
                <!-- Navigation Links -->
                <ul class="navbar-nav me-3">
                    <li class="nav-item header-nav-item">
                        <a href="{{ url_for('info.actualites') }}" class="nav-link header-nav-link">Actualités</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('info.comment_ca_marche') }}" class="nav-link header-nav-link">Comment ça marche ?</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{ url_for('stats.show_market_stats') }}" class="nav-link header-nav-link">Statistiques</a>
                    </li>
                     <li class="nav-item">
                        <a href="{{ url_for('providers.provider_form') }}" class="nav-link header-nav-link">Devenir prestataire</a>
                    </li>
                    {% if current_user.is_authenticated %}
                    <li class="nav-item header-nav-item">
                        <a href="{{ url_for('reservations.show_reservations') }}" class="nav-link header-nav-link" id="nav-link-reservations">Mes Réservations</a>
                    </li>
                    {% endif %}
                    {% if config['DEBUG'] %}
                     <li class="nav-item">
                        <a href="{{ url_for('debug.debug_index') }}" class="nav-link header-nav-link">Débogage</a>
                    </li>
                    {% endif %}
                </ul>

                <!-- Authentication Section -->
                <div class="header-actions d-flex align-items-center">
                    {% if current_user.is_authenticated %}
                        <div class="dropdown">
                            <button class="btn btn-outline-light dropdown-toggle header-button header-button-primary" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user-circle me-1"></i>
                                {{ current_user.username }}
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profil</a></li>
                                <li><a class="dropdown-item" href="{{ url_for('reservations.show_reservations') }}"><i class="fas fa-calendar-check me-2"></i>Mes Réservations</a></li>
                                <li><a class="dropdown-item" href="#"><i class="fas fa-heart me-2"></i>Favoris</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <button id="logoutButton" class="dropdown-item text-danger">
                                        <i class="fas fa-sign-out-alt me-2"></i>Déconnexion
                                    </button>
                                </li>
                            </ul>
                     </div>
                    {% else %}
                        <a href="#" class="btn btn-outline-light me-2 header-button header-button-primary auth-btn login-btn" id="login-button">Commencer</a>
                        <a href="#" class="btn btn-light header-button header-button-signup auth-btn register-btn" id="authButton">S'inscrire</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav> 
</header> 